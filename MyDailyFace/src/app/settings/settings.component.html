<div class="settings-container">
  <div class="header">
    <h1>Settings</h1>
    <p>Manage your app preferences</p>
  </div>

  <div class="settings-sections">
    <!-- Google Drive Sync Section -->
    <div class="settings-section">
      <h2>Google Drive Sync</h2>
      
      <!-- Connection Status -->
      <div class="setting-item">
        <div class="setting-info">
          <h3>Connection Status</h3>
          <p *ngIf="!syncStatus.isAuthenticated" class="status-disconnected">Not connected</p>
          <p *ngIf="syncStatus.isAuthenticated" class="status-connected">Connected to Google Drive</p>
          <p *ngIf="syncStatus.error" class="status-error">{{ syncStatus.error }}</p>
          <p *ngIf="!isGoogleDriveConfigured" class="status-error">Google Drive integration not configured</p>
        </div>
        <button 
          *ngIf="!syncStatus.isAuthenticated" 
          class="connect-button" 
          (click)="connectGoogleDrive()"
          [disabled]="!isGoogleDriveConfigured">
          Connect
        </button>
        <button 
          *ngIf="syncStatus.isAuthenticated" 
          class="disconnect-button" 
          (click)="disconnectGoogleDrive()">
          Disconnect
        </button>
      </div>

      <!-- Auto Sync Toggle -->
      <div class="setting-item" *ngIf="syncStatus.isAuthenticated">
        <div class="setting-info">
          <h3>Auto Sync</h3>
          <p>Automatically upload new photos to Google Drive</p>
        </div>
        <label class="toggle-switch">
          <input 
            type="checkbox" 
            [checked]="syncStatus.isEnabled" 
            (change)="onAutoSyncToggle($event)">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <!-- Manual Sync -->
      <div class="setting-item" *ngIf="syncStatus.isAuthenticated">
        <div class="setting-info">
          <h3>Manual Sync</h3>
          <p>Upload all photos to Google Drive now</p>
        </div>
        <button 
          class="sync-button" 
          (click)="syncAllPhotos()"
          [disabled]="syncStatus.isSyncing">
          <span *ngIf="!syncStatus.isSyncing">Sync All</span>
          <span *ngIf="syncStatus.isSyncing">Syncing...</span>
        </button>
      </div>

      <!-- Google Drive Info -->
      <div class="setting-item" *ngIf="isGoogleDriveConfigured">
        <div class="setting-info">
          <h3>About Google Drive Sync</h3>
          <p>Photos are synced to a "MyDailyFace" folder in your Google Drive</p>
        </div>
      </div>
    </div>

    <!-- Storage Section -->
    <div class="settings-section">
      <h2>Storage</h2>
      <div class="setting-item">
        <div class="setting-info">
          <h3>Photos Stored</h3>
          <p>{{ photoCount }} photos saved locally</p>
        </div>
      </div>
      <div class="setting-item">
        <div class="setting-info">
          <h3>Clear All Photos</h3>
          <p>Remove all stored photos from device</p>
        </div>
        <button class="danger-button" (click)="clearAllPhotos()">
          Clear All
        </button>
      </div>
    </div>

    <!-- About Section -->
    <div class="settings-section">
      <h2>About</h2>
      <div class="setting-item">
        <div class="setting-info">
          <h3>Version</h3>
          <p (click)="onVersionTap()" style="cursor: pointer;">MyDailyFace v1.0.0</p>
        </div>
      </div>
      <div class="setting-item">
        <div class="setting-info">
          <h3>Privacy</h3>
          <p>Photos stored locally and optionally synced to your Google Drive</p>
        </div>
      </div>
    </div>

    <!-- Hidden Testing Section -->
    <div class="settings-section" *ngIf="showTestingFeatures">
      <h2 style="color: #ff9500;">ðŸ§ª Testing Features</h2>
      
      <div class="setting-item">
        <div class="setting-info">
          <h3>Generate Test Data</h3>
          <p>Create 2 years of daily face photos for testing the Play feature</p>
        </div>
        <button 
          class="test-button" 
          (click)="generateTestData()"
          [disabled]="isGeneratingTestData">
          <span *ngIf="!isGeneratingTestData">Generate</span>
          <span *ngIf="isGeneratingTestData">Generating...</span>
        </button>
      </div>

      <div class="setting-item">
        <div class="setting-info">
          <h3>Clear Test Data</h3>
          <p>Remove all test-generated photos (keeps real photos)</p>
        </div>
        <button class="danger-button" (click)="clearTestData()">
          Clear Tests
        </button>
      </div>

      <div class="setting-item">
        <div class="setting-info">
          <h3>Animation Speed</h3>
          <p>Slow down animations for debugging (Current: {{ getAnimationSpeedText() }})</p>
        </div>
      </div>
      
      <div class="setting-item">
        <div class="setting-info">
          <h3>Speed Options</h3>
          <p>Choose animation slowdown multiplier</p>
        </div>
        <div class="speed-controls">
          <button class="speed-button" 
                  [class.active]="currentAnimationSpeed === 1"
                  (click)="setAnimationSpeed(1)">
            Normal
          </button>
          <button class="speed-button" 
                  [class.active]="currentAnimationSpeed === 2"
                  (click)="setAnimationSpeed(2)">
            2x
          </button>
          <button class="speed-button" 
                  [class.active]="currentAnimationSpeed === 5"
                  (click)="setAnimationSpeed(5)">
            5x
          </button>
          <button class="speed-button" 
                  [class.active]="currentAnimationSpeed === 10"
                  (click)="setAnimationSpeed(10)">
            10x
          </button>
        </div>
      </div>

      <div class="setting-item">
        <div class="setting-info">
          <h3>Hide Testing</h3>
          <p>Hide these testing features</p>
        </div>
        <button class="cancel-button" (click)="hideTestingFeatures()">
          Hide
        </button>
      </div>
    </div>
  </div>
</div>